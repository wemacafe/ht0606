<!DOCTYPE html>
<html>
<head>
  <title>Hot Toddy</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
  <style>
    .table-responsive {
      overflow-x: auto;
    }
    table {
      border-collapse: collapse;
      width: 100%;
      white-space: nowrap;
    }
    th, td {
      border: 1px solid black;
      padding: 8px;
    }
    .image-wrapper {
      border: 2px solid blue;
      padding: 2px;
      display: inline-block;
      overflow: hidden;
    }
    .image-wrapper img {
      transition: transform 0.3s ease;
    }
    .image-wrapper:hover img {
      transform: scale(1.1);
    }
    .clicked {
      background-color: yellow;
    }
    #floatingImage {
      width: 50px;
      height: auto;
      position: fixed;
      right: 0px;
      bottom: 20px;
      z-index: 9999;
    }
    .table-striped tbody tr:hover td {
    background-color: rgb(219, 201, 188);
    }
  </style>
</head>
<body>
  <header style="background-color: rgb(219, 201, 188);" class="text-white py-4">
    <div class="container-fluid mx-5">
      <h1>Hot Toddy Notion DATA to Shopify (Products)</h1>
    </div>
  </header>
  
  <!-- ä¸€éµä¸Šæ¶ -->
  <div class="mx-5 mt-3 d-flex justify-content-end">
    <button id="All_Shopify" class="btn btn-primary" onclick="LaunchProducts();">å…¨éƒ¨ä¸Šæ¶</button>
    <div style="width: 10px;"></div>
    <button id="uptodata" class="btn btn-warning text-white" onclick="UPtoDate();">å…¨éƒ¨æ›´æ–°</button>
    <div style="width: 20px;"></div>
  </div>  
  <!-- toast -->
  <button type="button" class="btn btn-primary" id="liveToastBtn" style="display: none;">Show live toast</button>

  <div class="position-fixed bottom-0 end-0 p-3" style="z-index: 11">
    <div id="liveToast" class="toast hide" role="alert" aria-live="assertive" aria-atomic="true">
      <div class="toast-header">
        <img src="images/gear.png" class="rounded me-2" alt="...">
        <strong class="me-auto">æç¤º</strong>
        <small>11 mins ago</small>
        <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
      </div>
      <div class="toast-body">
        <!-- ä½¿ç”¨å ä½ç¬¦è¡¨ç¤ºåŠ¨æ€ä¿®æ”¹çš„éƒ¨åˆ† -->
        æ‰€æœ‰å•†å“å·²ä¸Šæ¶æˆåŠŸ.
      </div>
    </div>
  </div>
  
  <div class="container-fluid mt-4">
    <div class="mx-5 table-responsive">
      <table class="table table-striped">
        <thead>
          <tr>
            <th>â­ï¸SKUğŸ¤–</th>
            <th>ç¢ºèª</th>
            <th>åˆ†é¡ğŸ¤–âœ…</th>
            <th>tagğŸ¤–âœ…</th>
            <th>å“åğŸ¤–âœ…</th>
            <th>å®šåƒ¹ğŸ¤–âœ…</th>
            <th>åº«1ğŸ¤–âœ…</th>
            <th>åº«2âœ…</th>
            <th>memo</th>
            <th>åœ–ç‰‡ğŸ¤–</th>
            <th>æ›´æ–°</th>
            <th>â­ï¸spid</th>
          </tr>
        </thead>
        <tbody class="table-striped align-middle">
          <% items.forEach(function(item) { %>
            <tr>
              <td><%= item.SKU %></td>
              <td><%= item.ç¢ºèª %></td>
              <td style="white-space: normal;"><%= item.åˆ†é¡ %></td>
              <td><%= item.tag.join(', ') %></td>
              <td style="white-space: normal;"><%= item.å“å %></td>
              <td style="text-align: right;"><%= item.å®šåƒ¹ %></td>
              <td style="text-align: right;"><%= item.åº«1 %></td>
              <td style="text-align: right;"><%= item.åº«2 %></td>
              <td><%= item.memo %></td>
              <!-- <td><%= item.åœ–ç‰‡ %></td> -->
              <td class="text-center">
                <% if (item.spid) { %>
                  <a href="https://hottoddy444.myshopify.com/admin/products/<%= item.spid %>" target="_blank">
                    <% if (item.åœ–ç‰‡) { %>
                      <div class="image-wrapper">
                        <img src="<%= item.åœ–ç‰‡ %>" style="max-width: 100px; max-height: 100px;" alt="åœ–ç‰‡">
                      </div>
                    <% } else { %>
                      æ²¡æœ‰åœ–ç‰‡
                    <% } %>
                  </a>
                <% } else if (item.åœ–ç‰‡) { %>
                  <img src="<%= item.åœ–ç‰‡ %>" style="max-width: 100px; max-height: 100px;" alt="åœ–ç‰‡">
                <% } else { %>
                  æ²¡æœ‰åœ–ç‰‡
                <% } %>
              </td>
              
              <% if (item.ç¢ºèª && item.æ›´æ–° && item.spid==="") { %>
                <td class="text-center">  
                  <button id="<%- item.SKU %>_btn" class="btn btn-primary" onclick='handleClick("<%- JSON.stringify(item.SKU).slice(1, -1) %>","<%- JSON.stringify(item.spid).slice(1, -1)%>")'>ä¸Šæ¶</button>
                </td>
              <% } else if (item.æ›´æ–° && item.spid) { %>
                <td class="text-center text-danger">éœ€è¦ä¿®æ”¹</td>
              <% } else { %>
                <td class="text-center"></td>
              <% } %>
              
              <% if (item.spid) { %>
                <td class="text-center">
                  <button id="sp_<%= item.spid %>" class="btn btn-secondary" onclick='modifyShopityItem("<%= item.SKU %>","<%= item.spid %>")' <%= item.æ›´æ–° && item.spid ? "" : "disabled" %>>ä¿®æ”¹ <%= item.spid %></button>
                </td>
              <% } else { %>
                <td class="text-center"></td>
              <% } %>

            </tr>
          <% }); %>
        </tbody>
      </table>
    </div>
  </div>
  <div class="mx-5 mt-3">
    <h4>ğŸ¤–:ç¬¬ä¸€æ¬¡é›»å•†ä¸Šæ¶æœƒè®Šæ›´çš„æ¬„ä½~~~âœ…:ä¿®æ”¹æœƒè®Šæ›´çš„æ¬„ä½~~~â­ï¸ï¼šå”¯ä¸€è­˜åˆ¥æ¬„ä½(ä¸å¯æ›´å‹•)</h4>
  </div>
  <footer style="background-color: rgb(219, 201, 188);" class="text-white py-5">
    <div class="container" style="display: flex; align-items: center; height: 100%;">
      <p style="text-align: center; margin: auto;">&copy; 2023 Hot Toddy. All rights reserved. (amber)</p>
    </div>
  </footer>
  
  <img id="floatingImage" src="images/b2t.png" onclick="moveTop()" />

  <script src="../javascripts/magic.js"></script>
</body>
</html>
